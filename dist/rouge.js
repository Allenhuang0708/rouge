"use strict";function treeBankTokenize(e){var r=e.replace(/^\"/,"``").replace(/([ (\[{<])"/g,"$1 `` ").replace(/\.\.\./g," ... ").replace(/[;@#$%&]/g," $& ").replace(/([^\.])(\.)([\]\)}>"\']*)\s*$/g,"$1 $2$3 ").replace(/[?!]/g," $& ").replace(/[\]\[\(\)\{\}<>]/g," $& ").replace(/--/g," -- ");r=" "+r+" ",r=r.replace(/"/g," '' ").replace(/([^'])' /g,"$1 ' ").replace(/'([sSmMdD]) /g," '$1 ").replace(/('ll|'LL|'re|'RE|'ve|'VE|n't|N'T) /g," $1 ");for(var n=-1;n++<TREEBANK_CONTRACTIONS.length;)r=r.replace(TREEBANK_CONTRACTIONS[n]," $1 $2 ");return r=r.replace(/\ \ +/g," ").replace(/^\ |\ $/g,""),r.split(" ")}function sentenceSegment(e){for(var r=new RegExp("\\b("+GATE_SUBSTITUTIONS.join("|")+")[.!?] ?$","i"),n=new RegExp("[ |.][A-Z].?$","i"),t=new RegExp("\\.\\.\\.*$"),a=e.split(/(\S.+?[.\?!])(?=\s+|$|")/g),s=[],o=0;o<a.length;i++)a[o]&&(a[o]=a[o].replace(/^\s+|\s+$/g,""),a[o+1]&&a[o].match(r)||a[o].match(n)||a[o].match(t)?a[o+1]=(a[o]||"")+" "+(a[o+1]||"").replace(/ +/g," "):a[o]&&a[o].length>0&&(s.push(a[o]),a[o]=""));return 0===s.length?[e]:s}function skipBigram(e){var r,n=arguments.length<=1||void 0===arguments[1]?2:arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(1>n)){t.next=2;break}throw new RangeError("Gap length must be greater than 0");case 2:if(!(e.length<n+1)){t.next=4;break}throw new RangeError("Gap length cannot be larger than the number of tokens available");case 4:r=0;case 5:if(!(r<e.length-n)){t.next=11;break}return t.next=8,[e[r],token[r+n]];case 8:r++,t.next=5;break;case 11:case"end":return t.stop()}},_marked[0],this)}function nGram(e){var r,n,t,a=arguments.length<=1||void 0===arguments[1]?2:arguments[1],s=arguments.length<=2||void 0===arguments[2]?{start:!1,end:!1,val:"<S>"}:arguments[2];return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.length<a)){o.next=2;break}throw new RangeError("Gram size cannot be larger than the number of tokens available");case 2:if(1!==a){o.next=6;break}return o.delegateYield(e,"t0",4);case 4:o.next=15;break;case 6:if(s.start)for(r=0;a-1>r;r++)e.unshift(s.val);if(s.end)for(n=0;a-1>n;n++)e.push(s.val);t=0;case 9:if(!(t<e.length-a)){o.next=15;break}return o.next=12,e.slice(t,t+a);case 12:t++,o.next=9;break;case 15:case"end":return o.stop()}},_marked[1],this)}function comb2(e){if(2>e)throw new RangeError("Input must be greater than 2");return.5*e*(e-1)}function fMeasure(e,r){var n=arguments.length<=2||void 0===arguments[2]?.5:arguments[2];if(0>n)throw new RangeError("beta value must be greater than 0");return 1>=(n>=0)?(1+n*n)*r*e/(r+n*n*e):void 0}function intersection(e,r){var n=new Set(e),t=new Set(r);return[].concat(babelHelpers.toConsumableArray(n)).filter(function(e){return t.has(e)})}function lcs(e,r){for(var n=[],t=[],a=0,s=e.length-1,o=r.length-1;e[a]===r[a];)n.push(e[a]),a++;for(;e[s]===r[o];)t.push(e[s]),s--,o--;for(var i=e.slice(a,s+1),g=r.slice(a,o+1),c=0;c<g.length;c++)for(var l=0;l<i.length;l++)g[c]===i[l]&&n.push(i[l]);return n.concat(t)}function rougeN(e,r){var t=arguments.length<=2||void 0===arguments[2]?{n:1,nGram:nGram,tokenizer:treeBankTokenize}:arguments[2],a=t.nGram(t.tokenizer(e),n),s=t.nGram(t.tokenizer(r),n),o=intersection(a,s);return o.length/a.length}function rougeS(e,r){var n=arguments.length<=2||void 0===arguments[2]?{beta:.5,skipBigram:skipBigram,tokenizer:treeBankTokenize}:arguments[2],t=n.skipBigram(n.tokenizer(e)),a=n.skipBigram(n.tokenizer(r)),s=intersection(t,a),o=s/comb2(r.length),i=s/comb2(e.length);return fMeasure(i,o,n.beta)}function rougeL(e,r){var n=arguments.length<=2||void 0===arguments[2]?{beta:.5,lcs:lcs,segmenter:sentenceSegment,tokenizer:treeBankTokenize}:arguments[2],t=n.segmenter(e),a=n.segmenter(r),s=n.tokenizer(e),o=n.tokenizer(r),i=a.map(function(e){var r=n.tokenizer(e),a=new Set(t.map(function(e){var t=n.tokenizer(e);return n.lcs(t,r)}));return a.size}),g=i.reduce(function(e,r){return e+r}),c=g/s.length,l=g/o.length;return fMeasure(l,c,n.beta)}var babelHelpers={};babelHelpers.toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)};var TREEBANK_CONTRACTIONS=[/\b(can)(not)\b/i,/\b(d)('ye)\b/i,/\b(gim)(me)\b/i,/\b(gon)(na)\b/i,/\b(got)(ta)\b/i,/\b(lem)(me)\b/i,/\b(more)('n)\b/i,/\b(wan)(na) /i,/\ ('t)(is)\b/i,/\ ('t)(was)\b/i],HONORIFICS=["jr","mr","mrs","ms","dr","prof","sr","sen","corp","rep","gov","atty","supt","det","rev","col","gen","lt","cmdr","adm","capt","sgt","cpl","maj","miss","misses","mister","sir","esq","mstr","phd","adj","adv","asst","bldg","brig","comdr","hon","messrs","mlle","mme","op","ord","pvt","reps","res","sens","sfc","surg"],ABBR_COMMON=["arc","al","exp","rd","st","dist","mt","fy","pd","pl","plz","tce","llb","md","bl","ma","ba","lit","ex","eg","ie","circa","ca","cca","vs","etc","esp","ft","bc","ad"],ABBR_ORGANIZATIONS=["co","corp","yahoo","joomla","jeopardy","dept","univ","assn","bros","inc","ltd"],ABBR_PLACES=["ala","ariz","ark","cal","calif","col","colo","conn","del","fed","fla","fl","ga","ida","ind","ia","la","kan","kans","ken","ky","la","md","mich","minn","mont","neb","nebr","nev","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wash","wis","wisc","wy","wyo","usafa","alta","ont","que","sask","yuk","ave","blvd","cl","ct","cres","hwy"],ABBR_DATES=["jan","feb","mar","apr","jun","jul","aug","sep","oct","nov","dec","sept","sep"],GATE_SUBSTITUTIONS=[].concat(ABBR_COMMON,ABBR_DATES,ABBR_ORGANIZATIONS,ABBR_PLACES,HONORIFICS),_marked=[skipBigram,nGram].map(regeneratorRuntime.mark);exports.rougeN=rougeN,exports.rougeS=rougeS,exports.rougeL=rougeL;